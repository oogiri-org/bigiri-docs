<!--@include: ./index.md-->

# bǃgǃrǃ ユーザーマニュアル

## はじめに

bǃgǃrǃ（ビギリ）は、オンラインで大喜利を楽しむためのスーパーフレキシブルな部屋システムです。出題、回答、投票の各フェーズを柔軟に設定でき、様々なスタイルの大喜利を実現できます。

### 主な特徴

- **柔軟な部屋設定**: 回答時間、投票方法、表示方式など、細かくカスタマイズ可能
- **グループ機能**: 参加者をグループに分けて進行できる
- **リアルタイム更新**: 回答や投票がリアルタイムで反映される
- **匿名性の制御**: 回答者名や投票者名の表示/非表示を設定可能
- **多様な投票システム**: お題毎、回答毎、グループ毎など複数の投票方式に対応
- **コメント・リアクション機能**: 出題や回答にコメントやリアクションを付けられる
- **SNS連携**: Twitter/Blueskyアカウントでのサインインに対応

---

## サインイン

### 通常サインイン

1. トップ画面で名前を入力
2. 「サインイン」ボタンをクリック
3. reCAPTCHAによる確認を完了

**名前のハッシュ値機能**  
名前に `#文字列` を含めると、暗号学的ハッシュ関数値（8文字）に変換されて表示されます。これにより同じパスワードを使用することで、異なるブラウザーやデバイスでも同じハッシュ値を持つ名前でサインインできます。

例:
- `びぎりちゃん` → `びぎりちゃん`
- `びぎりちゃん#abc` → `びぎりちゃん#DnbJh2JQ`

### Twitterサインイン

「Sign in with Twitter」ボタンからTwitterアカウントでサインインできます。

**Twitterサインインの利点:**
- 入室者一覧にTwitterへのリンクが表示される
- プロフィール画像が表示される
- 複数の未出題部屋を作成できる
- Twitterへのシェア機能が利用できる

### Blueskyサインイン

「Blueskyでサインイン」ボタンからBlueskyアカウントでサインインできます（試験稼働中）。

**Blueskyサインインの利点:**
- 入室者一覧にBlueskyへのリンクが表示される
- プロフィール画像が表示される
- Blueskyへのシェア機能が利用できる

### サインオーバー機能

サインイン状態を別のブラウザーやデバイスに引き継ぐことができます。

**使い方:**
1. メニューから「サインオーバー」を選択
2. 表示されるURLまたはQRコードを引き継ぎ先のブラウザーで開く（1時間以内）
3. URLをコピーするボタンを使用して簡単に共有できます

### 名前の変更

サインアウトせずに名前を変更できます。部屋内でも名前の変更が可能で、その場合はその部屋でのみ変更された名前が使用されます。

---

## 部屋の作成と管理

### 部屋の作成

「部屋を作成する」ボタンから新しい部屋を作成できます。

**基本設定:**
- **部屋名**: 部屋を識別する名前（Twitterハッシュタグとしても使用可能）
- **説明**: 部屋の説明やルールを記載
- **アイコン画像**: 部屋の右下に常に表示される画像（容量制限あり）
- **公開設定**: 部屋一覧への表示・非表示を選択

### 部屋設定

部屋作成者は部屋の詳細な設定を行えます。

#### 出題設定

**出題者制限:**
- 無制限: 誰でも出題できる
- 指定: 特定の入室者のみ出題可能

**出題者優先:**
- 出題優先入室者と優先時間を設定可能
- 優先時間中は優先される出題者の「出題する」ボタンが明滅します

**出題形式:**
- テキスト出題
- 画像付き出題
- マイストックドン/Blueskyフィード（SNS連携時）からのお題設定

#### 回答設定

**回答時間制限:**
- 無制限
- 時間制限（秒単位）
- 自動締め切り機能

**回答数制限:**
- 無制限
- 1人あたりの回答数を制限

**回答表示:**
- リアルタイム表示
- 一斉表示（締め切り後に一斉に表示）

**回答者匿名:**
- 常に表示
- 常に非表示
- 締切後表示

**回答編集:**
- 回答の編集・削除が可能
- 削除した回答は再回答のデフォルト値として設定されます

#### 投票設定

**投票時間制限:**
- 無制限
- 時間制限（秒単位）
- 回答数に比例した追加時間の設定が可能
- 自動締め切り機能

**投票数制限:**
- お題毎の投票数制限
- 回答毎の投票数制限
- 両方の組み合わせも可能

**投票表示:**
- リアルタイム表示
- 一斉表示（締め切り後に一斉に表示）

**投票者匿名:**
- 常に表示
- 常に非表示
- 締切後表示

**投票ルール:**
- 自回答への投票可否
- 出題者の投票可否

**投票の表示順:**
- 回答毎の投票は投票数降順で表示されます（投票数が同じ場合は投票順）

#### グループ設定

**投票グループ:**
- 無し: グループ機能を使用しない
- 有り（グループ外に投票）: 自分と異なるグループの回答に投票
- 有り（次グループに投票）: 自分のグループの直後に作成されたグループの回答に投票
- 有り（グループ間投票無し）: グループ間での投票を禁止

**回答グループ:**
- グループ毎に回答を管理
- グループ毎の回答数が表示されます（投票グループが無しの場合は非表示）

### 部屋の検索と閲覧

**部屋一覧:**
- 公開された部屋の一覧が表示されます
- 出題日時などの情報が確認できます

**部屋への入室:**
- 部屋URLを直接開くことで入室可能
- 未入室状態では部屋を閲覧専用として確認できます（閲覧モード）

### 部屋の削除

部屋作成者は部屋を削除できます。削除する際、未出題の部屋と出題済みの部屋で異なる確認メッセージが表示されます。

---

## 出題機能

### 出題の方法

**テキスト出題:**
1. 「出題する」ボタンをクリック
2. お題を入力
3. 「出題」ボタンで確定

**画像付き出題:**
1. 出題画面で画像を選択
2. お題テキストと一緒に投稿
3. 画像は出題に添付されて表示されます

**SNS連携出題:**
- マイストックドン（Mastodon）やBlueskyのフィードから直接お題を設定できます
- Twitter/Blueskyでサインインしている場合のみ利用可能

### 出題の管理

**出題の取り消し:**
- 回答がない場合、出題を取り消すことができます

**出題コメント:**
- 出題にコメントを付けることができます
- 出題コメントにクイックコメント（リアクション）を付けることもできます

**出題優先時間:**
- 設定された優先入室者の出題ボタンが優先時間中に明滅します

---

## 回答機能

### 回答の投稿

1. 回答フェーズで回答入力欄にテキストを入力
2. 「回答」ボタンをクリック
3. 回答が表示される（設定により即時または一斉表示）

### 回答の編集と削除

**編集:**
- 自分の回答を編集できます
- 投票済みの場合、編集するとその回答への全投票が削除されます

**削除:**
- 自分の回答を削除できます
- 削除された回答は次回回答時のデフォルト値として自動設定されます

### 回答の表示

**回答番号:**
- 各回答には番号が付けられます

**回答のスクロール:**
- 回答のヘッダー部分（回答者名や回答番号）をクリックすると、その回答が画面の縦中央までスクロールします

**回答の表示形式:**
- リアルタイム表示: 回答が投稿されるとすぐに表示
- 一斉表示: 回答フェーズ終了後に一斉に表示

---

## 投票機能

### 投票の方法

1. 投票フェーズで気に入った回答をクリック
2. 投票が記録される（設定により即時または一斉表示）

### 投票の取り消し

投票した回答を再度クリックすることで投票を取り消せます。

### 投票の種類

**お題毎の投票:**
- 1つのお題に対する総投票数を制限

**回答毎の投票:**
- 1つの回答に対する投票数を制限

**グループ投票:**
- グループ間での投票ルールを設定

### 投票の表示

**投票数の表示:**
- 各回答の得票数が表示されます
- 設定により、リアルタイムまたは締切後に表示

**投票者の表示:**
- 誰が投票したかを表示できます
- 匿名設定により非表示にすることも可能

**投票の集計:**
- 投票数順に並べ替えて表示できます
- 同率の場合の表示順も管理されています

---

## グループ機能

### グループの作成

1. 部屋設定でグループ機能を有効化
2. 入室者がグループを選択または作成
3. グループ毎に回答・投票を管理

### グループの種類

**投票グループ:**

**無し:**
- グループ機能を使用しない
- グループ毎の回答数は表示されません

**有り（グループ外に投票）:**
- 自分と異なるグループの回答に投票できます
- 同じグループの回答には投票できません

**有り（次グループに投票）:**
- 自分のグループの直後に作成されたグループの回答だけが表示されます
- 最後のグループの場合は最初のグループの回答が表示されます
- グループを選んでいない場合はグループを選んでいない回答だけが表示されます

**有り（グループ間投票無し）:**
- グループ間での投票が完全に禁止されます

### グループの管理

**グループの回答数:**
- グループ毎の回答数が表示されます（投票グループが「無し」の場合は非表示）

**グループの切り替え:**
- 入室者は自分のグループを変更できます

---

## コメント機能

### コメントの種類

**出題コメント:**
- お題に対してコメントを付けることができます
- クイックコメント（リアクション）機能も利用可能

**回答コメント:**
- 各回答に対してコメントを付けることができます

### コメントの投稿

1. コメントを付けたい出題または回答のコメントボタンをクリック
2. コメント内容を入力
3. 「投稿」ボタンで確定

### クイックコメント（リアクション）

出題コメントには、簡単なリアクションボタンで反応を示すことができます。

---

## 表示とフィルター

### 表示順の変更

回答の表示順を変更できます：
- 回答順
- 投票数順
- ランダム順

表示順のドロップダウンリストから選択します。

### フィルター機能

**自回答フィルター:**
- 自分の回答を非表示にできます

**自投票フィルター:**
- 自分が投票した回答のみを表示できます

**自コメントフィルター:**
- 自分がコメントした回答を表示できます

**フィルターボタンの操作:**
- ボタンをクリックすることでフィルターのオン・オフを切り替えられます
- 複数のフィルターを組み合わせて使用できます

### 残りの回答を表示

回答が多い場合、<button class="btn btn-xsm btn-primary"><i class="fa-solid fa-ellipsis"></i></button>ボタンをクリックすることで、残りの回答を表示できます。

### レイアウトとデザイン

**アニメーション:**
- 表示アニメーションが実装されています
- スムーズな画面遷移を実現

**文字の配色:**
- 読みやすい配色設計
- フォントサイズも適切に調整されています

**レスポンシブデザイン:**
- 様々なデバイスサイズに対応

---

## 入室者管理

### 入室者一覧

「入室者一覧」ボタンから現在の入室者を確認できます。

**表示情報:**
- 入室者名
- プロフィール画像（SNSサインイン時）
- SNSへのリンク（Twitter/Bluesky）
- 入室時刻
- 最終アクセス時刻

### 権限管理（部屋作成者のみ）

部屋作成者は入室者の権限を管理できます：

**出題者の設定:**
- 特定の入室者を出題者として指定
- 出題者から除外

**回答者の設定:**
- 特定の入室者のみ回答可能にする
- 回答者から除外

**投票者の設定:**
- 特定の入室者のみ投票可能にする
- 投票者から除外

### 受刑者機能

部屋作成者は問題のある入室者を受刑者として指定できます：
1. 入室者一覧から対象者を選択
2. 「受刑者に追加」をクリック
3. 指定された入室者は強制退室となります

---

## データエクスポート

### ログのダウンロード

部屋のログをCSV形式でダウンロードできます。

**ダウンロード内容:**
- 出題履歴
- 回答履歴
- 投票履歴
- タイムスタンプ

**使い方:**
1. 部屋メニューから「ログをダウンロード」を選択
2. CSV形式でデータが保存されます

### データの活用

ダウンロードしたログデータは以下の用途に活用できます：
- 統計分析
- 成績集計
- アーカイブ保存

---

## その他の機能

### 公開設定

**部屋の公開/非公開:**
- 公開: 部屋一覧に表示される
- 非公開: URLを知っている人のみアクセス可能

### 閲覧モード

未入室の状態で部屋を閲覧できます：
- 出題内容の確認
- 回答の閲覧（表示設定による）
- 投票結果の確認（表示設定による）

### Twitter/Bluesky連携

**シェア機能:**
- 出題や回答をSNSにシェアできます
- 部屋へのリンクを含めて投稿可能

**フィード連携:**
- マイストックドン（Mastodon）やBlueskyのフィードからお題を取得
- SNSの投稿をそのまま出題として使用可能

### バリデーション

システムは入力内容を検証し、エラーを防ぎます：
- 部屋設定の入力チェック
- アイコン画像の容量制限
- 文字数制限

### パフォーマンス最適化

**軽量化:**
- 投票の集計処理を軽量化
- 転送処理の改善
- 効率的なデータ読み込み

**リアルタイム更新:**
- Firestoreを使用したリアルタイム同期
- 自動更新機能

### セキュリティ

**reCAPTCHA:**
- サインイン時にreCAPTCHAによる確認を実施
- スパムやbotからの保護

**ハッシュ値:**
- 名前のハッシュ化により、同一性を保証
- プライバシー保護

### バグ修正と改善

システムは継続的に改善されています：
- 定期的なバグ修正
- 使用パッケージの更新
- ユーザーフィードバックに基づく機能改善

---

## トラブルシューティング

### よくある問題

**サインインできない:**
- reCAPTCHAが完了しているか確認
- ネットワーク接続を確認

**回答が表示されない:**
- 回答の表示設定を確認（一斉表示の場合は締切後に表示）
- フィルター設定を確認

**投票できない:**
- 投票数制限に達していないか確認
- 自回答への投票が禁止されている可能性を確認
- グループ設定を確認

**画像がアップロードできない:**
- ファイルサイズが制限内か確認
- 対応している画像形式か確認

### お問い合わせ

問題が解決しない場合は、部屋の説明欄や公式SNSアカウントから運営者にお問い合わせください。

---

## 更新履歴

このマニュアルは、bǃgǃrǃの最新機能を反映して作成されています。システムは継続的にアップデートされており、新機能の追加や既存機能の改善が行われています。

最新の更新情報はトップ画面の更新情報からご確認ください。

---

**最終更新: 2025年10月**

このユーザーマニュアルは、bǃgǃrǃのリリースノートから自動生成されています。
