# bǃgǃrǃ ユーザーマニュアル

## はじめに

bǃgǃrǃ（ビギリ）は、オンラインで大喜利を楽しむためのスーパーフレキシブルな部屋システムです。出題、回答、投票の各フェーズを柔軟に設定でき、様々なスタイルの大喜利を実現できます。

### 主な特徴

- **柔軟な部屋設定**: 回答時間、投票方法、表示方式など、細かくカスタマイズ可能
- **グループ機能**: 参加者をグループに分けて進行できる
- **リアルタイム更新**: 回答や投票がリアルタイムで反映される
- **匿名性の制御**: 回答者名や投票者名の表示/非表示を設定可能
- **投票システム**: 複数の投票方式に対応
- **コメント機能**: 出題や回答にコメントを付けられる

---

## 基本的な使い方

### 1. サインイン
トップ画面から名前を入力してサインインします。

### 2. 部屋を作成または入室
- 新しい部屋を作成する場合は「部屋を作成する」ボタンをクリック
- 既存の部屋に入る場合は部屋一覧から選択

### 3. 出題
部屋作成者または許可された出題者が問題を出します。

### 4. 回答
回答フェーズで回答を入力します。

### 5. 投票
投票フェーズで気に入った回答に投票します。

### 6. 結果確認
結果フェーズで順位や得票数を確認できます。

---

## サインイン

### 通常サインイン
1. トップ画面で名前を入力
2. 「サインイン」ボタンをクリック
3. reCAPTCHAによる確認を完了

**名前のハッシュ値機能**
名前に `#文字列` を含めると、暗号学的ハッシュ関数値（8文字）に変換されて表示されます。

例:
- `びぎりちゃん` → `びぎりちゃん`
- `びぎりちゃん#abc` → `びぎりちゃん#DnbJh2JQ`

### Twitterサインイン
「Sign in with Twitter」ボタンからTwitterアカウントでサインインできます。Twitterサインインすると以下の機能が利用できます:
- 入室者一覧にTwitterへのリンクが表示される
- プロフィール画像が表示される
- 複数の未出題部屋を作成できる

### Blueskyサインイン
「Blueskyでサインイン」ボタンからBlueskyアカウントでサインインできます（試験稼働中）。

### サインオーバー機能
サインイン状態を別のブラウザーに引き継ぐことができます:
1. メニューから「サインオーバー」を選択
2. 表示されるURLまたはQRコードを引き継ぎ先のブラウザーで開く（1時間以内）
3. サインオーバー画面にURLをコピーするボタンもあります

### 名前の変更
サインアウトせずに名前を変更できます。部屋内でも名前の変更が可能で、その場合はその部屋でのみ変更された名前が使用されます。

---

## 部屋の作成

### 基本情報
- **部屋名**: 部屋を識別する名前（Twitterハッシュタグとしても使用可能）
- **説明**: 部屋の説明やルールを記載
- **アイコン画像**: 部屋の右下に常に表示される画像（容量制限あり）

### 履歴機能
部屋名の横の履歴ボタンから、同じブラウザーで作成した部屋の一覧を表示できます:
- 「読み込む」ボタンで設定を再利用
- 「削除する」ボタンで履歴から削除
- 同一の部屋名で作成した場合、最新の設定のみが残る

---

## 部屋設定

### 出題設定

#### 出題者制限
- **無し**: 誰でも出題可能
- **有り**: 特定の入室者のみ出題可能
- **有り（Sign in with Twitter）**: Twitterサインインしたユーザーのみ出題可能

#### 出題優先時間
- **無し**: 優先なし
- **有り（投票者内1位）**: 前回投票者中の1位が優先される
- **有り（部屋作成者）**: 部屋作成者のみが出題できる

優先される出題者の「出題する」ボタンは明滅します。

#### 出題画像制限
画像の使用を禁止できます。

#### 出題コメント制限
- **無し**: 誰でもコメント可能
- **有り（部屋作成者のみ）**: 部屋作成者のみコメント可能

### 回答設定

#### 回答者制限
- **無し**: 誰でも回答可能
- **有り**: 特定の入室者のみ回答可能
- **有り（Sign in with Twitter）**: Twitterサインインしたユーザーのみ回答可能

#### 回答時間制限
回答フェーズの制限時間を設定できます。

#### 回答数制限
1題あたりの回答数を制限できます。

#### 回答シャッフル時間
設定した時間内の回答は投票フェーズで入室者毎にランダムな順番で表示されます。空の場合は全ての回答がシャッフル対象になります。

#### 回答者名表示
- **常に表示**
- **常に非表示**
- **締切後表示**

自回答の回答者名は常に表示されます。

#### 回答表示
- **即時**: 回答がリアルタイムで表示される
- **一斉**: 回答フェーズ終了後に一斉表示

#### 回答描画機能
回答に手描きの線画を追加できる機能の有無を設定できます。

#### 回答コメント制限
- **無し**: 誰でもコメント可能
- **有り（部屋作成者のみ）**: 部屋作成者のみコメント可能
- **有り（自回答）**: 自分の回答にのみコメント可能

### 投票設定

#### 投票者制限
- **無し**: 誰でも投票可能
- **有り**: 特定の入室者のみ投票可能
- **有り（Sign in with Twitter）**: Twitterサインインしたユーザーのみ投票可能

#### 投票時間制限
投票フェーズの制限時間を設定できます。「回答毎×」を設定すると回答数に比例して時間が追加されます。

#### 投票数制限（1題毎）
- **無し**: 制限なし
- **有り**: 1題あたりの投票数を制限
- **有り（超過可）**: 制限に達すると投票ボタンが投票一覧ボタンに変わるが、投票画面では超過可能

#### 投票数制限（1回答毎）
1回答あたりの投票数を制限できます。

#### 投票者名表示
- **常に表示**
- **常に非表示**
- **締切後表示**

自投票の投票者名は常に表示されます。

#### 投票表示
- **即時**: 投票がリアルタイムで表示される
- **一斉**: 投票フェーズ終了後に一斉表示

### グループ設定

#### 投票グループ
- **無し**: グループによる制限なし
- **有り（グループ内に投票）**: 自分と同じグループの回答のみ表示
- **有り（次グループに投票）**: 自分のグループの直後に作成されたグループの回答のみ表示

#### グループ分離
「有り（結果まで分離）」に設定すると、回答・投票フェーズで自分が入っているグループ以外の回答者の回答は表示されなくなります。

### カラースキーム
デフォルトの部屋のカラースキームを「ライト」または「ダーク」から選択できます。部屋画面のメニューバーからも一時的に変更可能です:
- **オート**: ブラウザーやOSの設定に従う
- **ライト**: ライトモード
- **ダーク**: ダークモード

### 通知（Discord）
**注意**: この機能は廃止されました。

---

## 出題

### 出題方法
1. 「出題する」ボタンをクリック
2. 出題内容を入力（最大1500文字）
3. 必要に応じて画像を添付
4. 出典を入力（著作物を用いる場合は必須）
5. 「出題する」ボタンで送信

### 出題の表示
- 150文字を超えた出題には、超えた位置にボタンが表示され、押すと残りの部分が表示されます
- 10行を超えた位置にもボタンが表示されます

### 出題画像
- 部屋設定で許可されている場合、画像を添付できます
- 画像の背景色が自動設定されます

### 出典
著作物を用いる場合は適切な出典を入力してください。出典欄の動作は改善されています。

---

## 回答

### 回答方法
1. 回答フェーズで回答欄に入力（最大1500文字）
2. 「回答する」ボタンをクリック
3. Ctrlキー+改行キーでも送信可能

### 回答の変更
回答を変更するボタンで回答内容を修正できます。回答時刻も更新されます。

### 回答の削除
回答を削除できます。直前に削除された回答がある場合、デフォルトとして回答欄に設定されます。

### 回答描画機能
部屋設定で許可されている場合、回答に手描きの線画を追加できます。

### 回答の表示
- 150文字を超えた回答には、超えた位置にボタンが表示され、押すと残りの部分が表示されます
- 10行を超えた位置にもボタンが表示されます
- 回答数がリアルタイムで表示されます

### 回答シャッフル
回答シャッフル時間内の回答は、投票フェーズで入室者毎にランダムな順番で表示されます。

---

## 投票

### 投票方法
1. 投票フェーズで気に入った回答の「投票する」ボタンをクリック
2. 投票数を選択（ドラッグで増減も可能）
3. 「投票する」ボタンで確定

### 投票数の調整
投票数ボタンをマウスで上方向にドラッグすると投票数を増やし、下方向にドラッグすると減らすことができます。

### 投票の削除
投票を削除できます。投票数制限を使い切った場合は、投票一覧から削除できます。

### 投票一覧
「投票を見る」ボタンから自分の投票を確認できます。投票数の合計も表示されます。投票フェーズでは回答一覧の上部にも表示されます。

### 投票のスクロール
- 最後に投票した回答にスクロールします
- 0票を投票した後や超過可設定の場合は末尾にスクロールします

---

## 結果の表示

### 順位と得票数
結果フェーズで各回答の順位と得票数が表示されます。

### 順位の決定方法
1. 得票数が多い方が上位
2. 得票数が同じ場合は回答者の投票数が多い方が上位
3. それも同じ場合は回答の早い方が上位

### 補正得票数と標準化変量
回答の得票数は回答者の投票数で補正され、標準化変量が計算されます:
- **標準化変量が2以上**: ユニコーン🦄が表示される（さらに1上がるごとに1つ増える）
- **標準化変量が1以上**: 順位に下線が表示される
- **標準化変量が-1以下**: 順位に上線が表示される
- **標準化変量が-2以下**: アイスクリーム🍦が表示される（さらに1下がるごとに1つ増える）

### 回答の表示順
ドロップダウンリストから表示順を選択できます:
- **設定順**: 部屋設定によるデフォルトの表示順
- **先着順**: 回答の早い順
- **後着順**: 回答の遅い順
- **上位順**: 得票数の多い順
- **下位順**: 得票数の少ない順
- **コ多順**: コメント数の多い順
- **コ少順**: コメント数の少ない順

### 投票の表示
回答毎の投票は投票数降順で表示されます（投票数が同じ場合は投票順）。

### 過去の結果
部屋の過去の結果を参照できます（34.5日以内の出題）。

---

## グループ機能

### グループとは
入室者をまとめる機能です。グループは作成された部屋内でのみ有効です。

### グループの作成
1. 「グループを見る」ボタンをクリック
2. 部屋作成者がグループを作成・削除できます
3. グループ名は重複可能で、空文字列も許されます
4. グループには説明欄があります

### グループの選択
1. 「グループを選ぶ」画面が表示されます
2. 自分のグループを選択できます
3. グループが追加された際、グループに入っていない入室者には自動的に表示されます

### グループの動作
- 最初のグループが作成される前の入室者は最初のグループに入れられます
- グループ作成後の入室者は最も新しく作成されたグループに入れられます
- 入っていたグループが削除された場合も、最も新しいグループに入れられます
- ナビゲーションバーに自分のグループ名が表示されます
- 回答者名の前にグループ名が表示されます

### グループ履歴機能
グループ名の横の履歴ボタンから、同じブラウザーで作成したグループの一覧を表示できます:
- 「読み込む」ボタンで設定を再利用
- 「削除する」ボタンで履歴から削除
- 同一のグループ名で作成した場合、最新の設定のみが残る

### 投票グループ
部屋設定で投票グループを設定すると、投票フェーズで表示される回答が制限されます:
- **グループ内に投票**: 自分と同じグループの回答のみ表示
- **次グループに投票**: 自分のグループの直後のグループの回答のみ表示

### グループ分離
部屋設定でグループ分離を有効にすると、回答・投票フェーズで自分が入っているグループ以外の回答者の回答は表示されなくなります。

### グループフィルター
結果フェーズおよび過去の結果画面でグループ名を押すと、そのグループの回答のみを表示できます。

---

## コメント機能

### 部屋コメント
部屋作成者が部屋トップページの上部にコメントを表示できます。いつでも投稿・表示および削除できます。最新1つが削除されます。

### 出題コメント
結果フェーズで出題にコメントを付けられます。部屋設定により制限できます。

### 回答コメント
結果フェーズで回答にコメントを付けられます。部屋設定により制限できます。コメントで空文字列も許されます。

### クイックコメント（リアクション）
結果フェーズで回答コメントボタンの横にあるスマイルボタンを押し、ドロップダウンメニューから絵文字を選択してコメントできます。出題コメントにもクイックコメント機能があります。

---

## フィルター機能

### 自回答フィルター
回答一覧の先頭のアイコンを押すと、自分の回答のみが表示されます。回答フェーズ、投票フェーズ、結果フェーズで使用できます。

### 自投票フィルター
回答一覧の先頭のアイコンを押すと、自分が投票した回答のみが表示されます。投票フェーズ、結果フェーズで使用できます。

### 自コメントフィルター
結果フェーズおよび過去の結果画面で、自分がコメントした回答のみを表示できます。

### フィーチャー機能
結果フェーズおよび過去の結果画面で、回答のアイコンを押すとその回答のみの表示になります。自回答・自投票フィルターと併用できます。

### グループフィルター
結果フェーズおよび過去の結果画面でグループ名を押すと、そのグループの回答のみを表示できます。

### フィルターボタンの表示
下方にスクロールしても自回答・自投票・自コメントフィルターボタンが表示され続けます。

---

## 入室者管理

### 入室者一覧
「入室者を見る」ボタンから入室者一覧を表示できます:
- 入室者数が表示されます
- 退室した出題者・回答者・投票者も含まれます
- 各入室者にトークン（8文字の英数字）が表示されます
- Twitterサインインしているユーザーにはプロフィール画像とTwitterへのリンクが表示されます
- 24時間以内に登録した入室者には新規登録者のマークが表示されます
- ユニコーン🦄獲得数が表示されます

### 入室者の表示順
ドロップダウンリストから表示順を選択できます:
- **先入順**: 入室時刻の早い順
- **後入順**: 入室時刻の遅い順
- **多🦄順**: ユニコーン獲得数の多い順
- **少🦄順**: ユニコーン獲得数の少ない順
- **昇名順**: 名前のUnicode値の昇順
- **降名順**: 名前のUnicode値の降順
- **昇Di順**: ディスクリミネーターのUnicode値の昇順
- **降Di順**: ディスクリミネーターのUnicode値の降順

### 出題者・回答者・投票者の設定
部屋作成者は入室者一覧から入室者を出題者・回答者・投票者へ追加および削除できます。

### 受刑者機能
部屋作成者は入室者を受刑者へ追加できます:
- 受刑者に追加された入室者は強制退室となります
- 受刑者は取り消し線つきで表示されます
- 同一の発信元から出題・回答・投票・コメントする入室者も追加されます
- 不正なアクセスによって出題・回答・投票・コメントを行おうとした入室者は自動的に受刑者に追加されます

### トークンの表示
出題者・回答者・投票者の名前をクリックすると、入室者のトークンが表示されます。グループを見る画面の入室者の名前をクリックしても表示されます。

### 新規登録者マーク
入室者を見る画面の新規登録者のマークをクリックすると、登録日時が表示されます。

### 操作ボタン群
部屋作成者が幅の狭いブラウザーで入室者を見る画面を表示させた場合、操作ボタン群を開閉できます。

---

## その他の機能

### ログ（CSV）
部屋の活動ログをCSVファイルとしてダウンロードできます:
- URLのリンクからダウンロード
- ダウンロードの際には入室している必要があります
- ディスクリミネーター付きCSVファイルも選択可能
- グループ名が含まれます
- ダウンロード時にサーバーが処理中であることが表示されます

### Atomフィード
部屋のAtomフィードが提供されています。

### Twitterリンク
- 部屋名をハッシュタグとして検索するTwitterリンク
- 部屋名をハッシュタグとしてツイートできるTwitterリンク
- Twitterサインインしている場合、ナビゲーションメニューにTwitterリンクが表示されます

### Blueskyリンク
Twitterポストや検索リンクの横に同等のBlueskyリンクが表示されます。

### タイマー表示
回答時間制限や投票時間制限が設定されている場合、残り時間がタイマーで表示されます。ダイアログウィンドウ上のボタンにもタイマーが表示されます。

### 回答のヘッダークリック
回答のヘッダー部分（回答者名や回答番号が表示される部分）をクリックすると、その回答を縦中央までスクロールします。

### 更新情報
トップ画面に更新情報を見るボタンがあり、更新情報の履歴をダイアログウィンドウで表示できます。

### 部屋存続時間
最終更新日時から11.5日間が部屋の存続時間です。

### 部屋作成制限
- 通常サインインの場合、未出題の部屋の作成は1つまで
- Twitterサインインの場合、複数の未出題部屋を作成可能

### メニューバーのタブ
部屋画面でメニューバーのタブにより表示を変えた際、非共通部分までスクロールします。

### クリエイティブ・コモンズ・ライセンス
トップ画面にクリエイティブ・コモンズ・ライセンスが掲示されています。

### 広告
広告が表示される場合があります。

---

## システム要件

### 対応ブラウザ
以下のバージョン以降のブラウザが対応しています:
- Microsoft Edge 16以降
- Firefox 60以降
- Safari 12以降
- iOS Safari 12以降
- Chrome 60以降

Internet Explorer 10/11およびLegacy Edgeは非対応です。

### フォント
- 日本語フォントが設定されています
- 絵文字はGoogle Fonts Noto Color Emojiに統一されています
- システムで使用している絵文字についてフォントが指定されています

---

## トラブルシューティング

### サインインできない
- ブラウザーのCookieが有効になっているか確認してください
- reCAPTCHAが正しく完了しているか確認してください

### 回答・投票ができない
- 部屋設定で制限されていないか確認してください
- 入室者一覧で出題者・回答者・投票者に設定されているか確認してください
- 受刑者に追加されていないか確認してください

### 表示が更新されない
- ブラウザーをリロードしてください
- 特にシステム更新後は必ずリロードを行ってください

### 投票時間制限が正しく動作しない
- 投票時間制限のうち回答数に比例した時間が積算されているか確認してください

---

## 更新履歴

このマニュアルは、2017年6月3日のα版テスト開始から2025年9月20日までの更新情報を基に作成されています。

### 主な機能追加の歴史

- **2017年6月**: α版テストを開始
- **2017年8月**: 画像お題機能を実装
- **2017年9月**: 出題者制限・回答者制限機能を実装
- **2018年9月**: 入室者一覧にトークン表示を追加
- **2019年1月**: アイコン画像機能を実装
- **2019年3月**: 名前のハッシュ値機能を実装
- **2020年1月**: Twitterサインイン機能を追加
- **2021年3月**: 回答描画機能を実装
- **2021年10月**: サインオーバー機能を実装
- **2022年11月**: グループ機能を実装
- **2022年11月**: クイックコメント（リアクション）機能を実装
- **2023年7月**: 出題・回答の文字数制限を1500文字に引き上げ
- **2024年6月**: グループを選ぶ画面を実装
- **2025年2月**: Blueskyサインイン機能を追加（試験稼働）
- **2025年5月**: 投票グループ機能を実装
- **2025年8月**: AIで試験的に生成したユーザーマニュアルへのリンクを追加

システムは継続的に改善されており、使用パッケージの更新、パフォーマンスの最適化、UIの改善などが定期的に行われています。

---

## お問い合わせ

bǃgǃrǃに関するご質問やフィードバックは、部屋のコメント機能やTwitter/Blueskyのリンクからお寄せください。

---

**このマニュアルはAIによって試験的に生成されたものです。**

最新の情報は更新情報をご確認ください。
